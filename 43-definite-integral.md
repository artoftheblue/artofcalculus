# Определённый интеграл

Понятие определённого интеграла восходит ещё к Архимеду. Мы рассмотрим неформальное введение, где объясним суть проблемы.

## Неформальное введение

Пусть дана функция $f: \mathbb{R} \to \mathbb{R}^1$, которая непрерывна на отрезке $[a,b]$. Будем писать $y  = f(x)$ и будем считать, что функция на этом отрезке принимает только положительные значения. Рассмотрим фигуру $ABCD$ (см. рис.[](#int_a_b)), ограниченную кривой $y=f(x)$, двумя ординатами $x = a$, $x =b$ и отрезком оси $Ox.$ Подобные фигуры называются **криволинейными трапециями**.

Рассмотрим теперь задачу о нахождении площади плоской криволинейной трапеции $ABCD$ (см. рис.[](#int_a_b))

```{figure} ./int_a_b1.jpg
Площадь фигуры $ABCD$ примерно равна сумме площадей разноцветных прямоугольников, и чем их больше, тем точнее будет ответ.
```

Разделим основание $AB$ нашей фигуры произвольным образом на части и проведём ординаты, соответствующие точкам деления; тогда криволинейная трапеция разобьётся на ряд полосок. 

Заменим теперь приближённо каждую полоску некоторым прямоугольником, основание которого то же, что и у полоски, а высота совпадает с одной из ординат полоски. Таким образом, криволинейная фигура заменится некоторой ступенчатой фигурой, составленной из отдельных прямоугольников. 

Обозначим абсциссы точек деления через
$$
x_0 : = a < x_1 < x_2 < \cdots < x_i < x_{i+1} < \cdots < x_n =:b.
$$

Будем нумеровать прямоугольники числами $0,1,2,\ldots, n-1$ и пусть $S_i$ — площадь $i$-го прямоугольника. Ясно, что $S_i = y_i \Delta x_i$, где $\Delta x_i: = x_{i+1} - x_i.$

Тогда приближённое значение площади криволинейной трапеции $S_{ABCD}$ равно
$$
S_{ABCD} \approx \sum_{k = 0}^{n-1} y_k \Delta x_k.
$$

Тогда можно предположить, что при убывании всех $\Delta x_i$ к нулю мы будем получать более точное значение, т.е. другими словами мы хотим сказать, что точное значение площади это следующий предел
$$
S_{ABCD} = \lim_{\substack{\Delta x_1 \to 0 \\ \vdots \\ \Delta x_{n-1} \to 0}} \sum_{k = 0}^{n-1} y_k \Delta x_k.
$$

Для обозначения предела такой суммы вида и был Лейбницем введён символ интеграла, т.е.
$$
\int_a^b f(x) \mathrm{d}x : = \lim_{\substack{\Delta x_1 \to 0 \\ \vdots \\ \Delta x_{n-1} \to 0}} \sum_{k = 0}^{n-1} y_k \Delta x_k.
$$

## Строгое определение интеграла на компактах

Предыдущее "определение" интеграла имеет очень много недостатков. Например, мы пользовались интуитивным пониманием площади криволинейной трапеции. 

Здесь мы дадим строгое определение интеграла.

### Разбиение промежутка

Напомним, что под промежутком мы понимаем подмножество прямой $\mathbb{R}$ одного из видов; $[a,b]$, $[(a,b]$, $[a,b)$, $(a,b)$, при этом мы считаем, что $|a|,|b| < \infty.$ Промежуток мы будем обозначать буквами $I$ или $J$, а под **длиной промежутка** будем понимать выражение, $b-a$ и если $I$ один из рассмотренных промежутков, то будем писать $|I|: = b-a.$

:::{warning}
Нам также будет полезно рассматривать пустой промежуток $I$ или, если он содержит всего одну точку, то в таком случае полагаем $|I|:=0$.
:::

:::{prf:definition}
Пусть $I$ — промежуток, под **разбиением** промежутка $I$ понимается **конечное** множество $\lambda(I)$ промежутков содержащихся в $I$, при этом любой $x \in I$ принадлежит одному и только одному промежутку из $\lambda.$
:::

:::{prf:example}
Пусть $I = [1,8]$, тогда следующее множество
$$
\lambda(I) : = \{ \varnothing, \{1\}, (1,3), [3,5), \{5\}, (5,8]  \}
$$
есть разбиение промежутка $I = [1,8]$, потому что любой $x \in I$ лежит в одном и только в одном из перечисленных подмножеств множества $\lambda(I)$. А если же мы положим, что
$$
\lambda'(I): = \{ \varnothing, \{1\}, [1,3), (2,7), [3,5), \{5\}, (5,8] \}
$$
то мы уже получаем не разбиение, поскольку, например, точка $2.5 \in [1,3)$ и $2.5 \in (2,7)$.

Множество $\lambda''(I) := \{[1,4), (4,8]\}$ тоже не является разбиением промежутка $I = [1,8]$ так как $4$ не принадлежит ни одному из подмножеств множества $\lambda''(I)$. Наконец, множество $\lambda'''(I) := \{(0,5], (5,8]\}$ также не является разбиением промежутка $I = [1,8]$, потому что $(0,5]$ не содержится в $I.$
:::

:::{warning}
Заметим, что пустое множество может не входить в разбиение промежутка. 
:::


:::{prf:theorem}[Конечная аддитивность длины]
Пусть $I\subsetneq \mathbb{R}$ — промежуток, а $\lambda(I)$ — его разбиение, тогда
$$
|I| = \sum_{A \in \lambda(I)}|A|.
$$
:::
:::{prf:proof}
:class: dropdown
:nonumber:
Доказывать будем по индукции, а именно по мощности разбиения. То есть для всех разбиений, в которых ровно $n$ элементов верна формула $|I| = \sum_{A \in \lambda(I)}|A|$.

(1) Если $n =0$ то значит, что $I = \varnothing$, так как любое его разбиение не должно иметь непустых элементов, но тогда формула очевидна.

(2) Если $n=1$, то это значит, что любое его разбиение имеет ровно один непустой элемент, а это значит, что $I = \{a\}$ — одноточечное множество, но и в таком случае формула тоже очевидна.

(3) Пусть формула верна для любых разбиений, в которых ровно $n\ge 1$ элементов. И допустим теперь, что у промежутка $I$ имеются разбиения, у которых $n+1$ элементов. Именно для таких разбиений мы будем доказывать формулу. Случаи, когда $I = \varnothing$ или же когда $I = \{a\}$ очень просты для рассмотрения, так как тогда все разбиения либо содержат пустое множество, либо пустое и одноточечное.

Итак, пусть $I$ — это одно из четырёх множеств $(a,b), (a,b], [a,b), [a,b]$.

Допустим, что $b \in I$ тогда $I$ — это либо $(a,b]$, либо $[a,b]$. Рассмотрим произвольное разбиение $\lambda(I)$, в котором ровно $n+1$ элементов, тогда должен найтись ровно один элемент, скажем, $B$, который содержит $b$.

С другой же стороны, $B \subseteq I$, а тогда $B$ имеет либо вид $(c,b]$, либо $[c,b]$ или же $\{b\}$, где $a \le c \le b$. Для удобства можно считать, что в последнем случае $c =b$.

Рассмотрим теперь множество $I \setminus B$, которое имеет вид либо $[a,c]$, либо $(a,c)$, либо $(a,c]$, или $[a,c)$, когда $c >a$, или же $I \setminus B$ — это точка или пустое множество. Другими словами, $I\setminus B$ — это промежуток. 

Далее, так как $I = B \cup I \setminus B$ и $B \cap I \setminus B = \varnothing$, то множество $\lambda(I) \setminus B$ является разбиением промежутка $I\setminus B$. 

Таким образом, разбиение $\lambda(I)\setminus B$ содержит уже $n$ элементов. Но согласно предположению, для промежутка $I \setminus B$ верна формула
$$
|I \setminus B| = \sum_{K \in \lambda(I) \setminus B} |K|
$$

Воспользовавшись теперь равенством,
$$
|I| =|B| + |I \setminus B|
$$
мы получим

$$
|I| = |B| + |I \setminus B| = |B| + \sum_{K \in \lambda(I) \setminus B} |K| = \sum_{A \in \lambda(I)} |A|.
$$

(4) Осталось рассмотреть случай, когда $b \notin I$, но тогда $I$ это либо $(a,b)$ либо $[a,b)$ и существует один из элементов множества $\lambda(I)$ который имеет вид либо $(c,b)$ или же $[c,b)$. Это означает, что вид множества $I \setminus B$ может принять одно из четырёх значений $[a,c]$, $(a,c)$, $(a,c]$, $[a,c)$ когда $c >a$ или же это точка или пустое множество. Остальная часть рассуждения продолжается как выше. 
:::

### Ступенчатые функции

Сейчас мы опишем класс функций, которые ``очень просты'' для интегрирования\footnote{Отметим, что эти функции также ещё называются **кусочно-постоянными**, в англоязычной литературе они так и называются, **piecewise constant functions.**}, а потом с помощью их мы уже определим интеграл в общем виде.  

:::{prf:definition}
Пусть $A \subseteq \mathbb{R}$, и пусть дана функция $f: A \to \mathbb{R}$. Говорят, что $f$ **постоянная функция**, если существует такое $\alpha \in \mathbb{R}$, что $f(x) = \alpha$ для всех $x \in A$. Если $B \subseteq A$, то говорят, что $f$ **постоянная на $B$**, если существует такое $\beta \in \mathbb{R}$, что $f(y) = \beta$ для всех $y \in B.$
:::


:::{warning}
Из этого определения следует, что если функция $f$ постоянна на **непустом** множестве $A$, то она не может принимать два или более разных значения. Однако из определения пустого множества следует, что постоянная функция на пустом множестве может принимать **любое значение!**
:::

:::{prf:definition}
Пусть дан промежуток $I \subsetneq \mathbb{R}$, и пусть дана функция $f: I \to \mathbb{R}$, и пусть $\lambda(I)$ — какое-то разбиение промежутка $I$. Говорят, что **функция $f$ есть ступенчатая функция на $I$ относительно $\lambda(I)$**, если для каждого $J \in \lambda(I)$, $f$ является постоянной на $J$. 
:::

:::{prf:example}
:name: int_[1,6]=10
Пусть $I = [1,6]$ и определим функцию $f: [1,6]: \to \mathbb{R}$ следующим образом
$$
f(x) = \begin{cases}
\,7, & 1 \le x < 3 \\
\,4, & x = 3 \\
\,5, & 3 < x <6 \\
\,2, & x = 6.
\end{cases}
$$
Тогда, если мы рассмотрим разбиение
$$
\lambda(I) := \Bigl\{[1,3), \{3\}, (3,6), \{6\} \Bigr\}
$$
промежутка $I$, то получаем, что $f$ — ступенчатая функция относительно этого разбиения. Рассмотрим теперь другое разбиение этого же промежутка
$$
\lambda'(I) : = \Bigl\{\varnothing, [1,2), \{2\}, (2,3), \{3\}, (3,5), [5,6),\{6\} \Bigr\}.
$$
Тогда несложно видеть, что $f$ будет тоже ступенчатой относительно этого разбиения. 
:::

Этот пример показывает, что понятие ступенчатой функции можно определить без привлечения разбиения промежутка.

:::{prf:definition}
:name: fiber
Пусть $I$ — промежуток, и пусть $\lambda(I)$, $\lambda'(I)$ — два его разбиения. Говорят, что разбиение $\lambda'(I)$ **тоньше**, чем $\lambda(I)$, если для каждого $J' \in \lambda'(I)$ найдётся такой $J \in \lambda(I)$, что $J' \subseteq J$.
:::

:::{prf:example}
Вернёмся к предыдущему примеру с промежутком $I = [1,6]$ и разбиениями   
$$\begin{align*}
\lambda(I) &:=& \Bigl\{[1,3), \{3\}, (3,6), \{6\} \Bigr\},\\
\lambda'(I) &: =& \Bigl\{\varnothing, [1,2), \{2\}, (2,3), \{3\}, (3,5), [5,6),\{6\} \Bigr\}.
\end{align*}$$

Тогда видно, что $\lambda'(I)$ тоньше, чем $\lambda(I)$.
:::


:::{prf:definition}
Пусть дан промежуток $I \subsetneq \mathbb{R}$ и пусть дана функция $f: I \to \mathbb{R}$. Говорят, что функция $f$ **ступенчатая на $I$**, если существует такое разбиение $\lambda(I)$, что $f$ — постоянная на $I$ относительно $\lambda(I).$
:::


:::{prf:lemma}
:name: fiber_for_functions
Пусть $I \subsetneq \mathbb{R}$ — промежуток и пусть $f:I \to \mathbb{R}$ — ступенчатая функция относительно разбиения $\lambda(I)$, тогда если имеем разбиение $\lambda'(I)$, которое тоньше, чем $\lambda(I)$, то $f$ — ступенчатая относительно $\lambda'(I).$ 
:::

:::{prf:proof}
:class: dropdown
:nonumber:
Действительно, пусть $A' \in \lambda'(I)$ — произвольный элемент разбиения, тогда найдётся такой $A \in \lambda(I)$, что $A' \subseteq A$. Тогда если $f(x) = \alpha$ для всех $x \in A$, то и $f(x') = \alpha$ для всех $A'.$
:::

:::{warning}
Таким образом, мы будем рассматривать просто ступенчатые функции на промежутке, не определяя какое-то конкретное разбиение.
:::


:::{prf:lemma}
Пусть $I \subsetneq \mathbb{R}$ — промежуток и пусть $f,g:I \to \mathbb{R}$ — ступенчатые функции на нём. Тогда функции
$$
f\pm g, \quad \max\{f,g\}, \quad f\cdot g
$$
тоже ступенчатые на $I$. Если $g(x) \ne 0$ при $x \in I$, то $\frac{f}{g}$ тоже ступенчатая функция на $I.$
:::
:::{prf:proof}
:class: dropdown
:nonumber:
Доказательство сразу вытекает из определения ступенчатой функции и сводится к простой проверке.
:::

### Интеграл от ступенчатой функции на промежутке

Итак, у нас всё готово, чтобы ввести следующее важное определение.

:::{prf:definition}
Пусть $I \subsetneq \mathbb{R}$ — промежуток, $\lambda(I)$ — разбиение промежутка $I$ и пусть $f:I \to \mathbb{R}$ — ступенчатая функция относительно этого разбиения. Определим **интеграл на промежутке $I$** ступенчатой функции $f:I \to \mathbb{R}$ относительно разбиения $\lambda(I)$ следующим образом
$$
\int_{\lambda(I)}f\mathrm{d}x: =  \sum_{J \in \lambda(I)} \alpha_J\cdot |J|
$$
:::

:::{warning}
Во-первых, что стоит слева от равно нужно понимать как символ и не более того! Во-вторых, это определение может показаться некорректным если $\lambda(I)$ содержит пустое множество, но так как $|\varnothing| = 0$, то мы на самом деле получаем корректное определение.     
:::

:::{prf:example}
:name: int_[1,4]=10
Пусть $f: [1,4] \to \mathbb{R}$ определена следующим образом
$$
f(x)  = \begin{cases}
\, 2 & 1 \le x <3 \\
\, 4 & x = 3 \\
\, 6 & 3< x \le 4
\end{cases}
$$
и пусть $\lambda(I) = \{ [1,3), \{3\}, (3,4] \}$, тогда
$$\begin{align*}
\int_{\lambda(I)} f \mathrm{d}x &=& \alpha_{[1,3)}\cdot | [1,3) | + \alpha_{\{3\}}\cdot |\{3\}| + \alpha_{(3,4]} \cdot | (3,4] | \\
&=& 2 \cdot 2 + 4 \cdot 0 + 6 \cdot 1 \\
&=& 10.
\end{align*}$$

С другой стороны, рассмотрим такое разбиение $\lambda'(I) = \{ \varnothing, [1,2), [2,3), \{3\}, (3,4] \}$, нетрудно видеть, что оно тоньше разбиения $\lambda(I)$. Находим
$$\begin{align*}
\int_{\lambda'(I)}f \mathrm{d}x&=&\alpha_\varnothing \cdot |\varnothing| + \alpha_{[1,2)} \cdot | [1,2) | + \alpha_{[2,3)} \cdot |[2,3)| + \alpha_{\{3\}}\cdot |\{3\}| + \alpha_{(3,4]} \cdot | (3,4] | \\
&=& \alpha_\varnothing \cdot 0 + 2 \cdot 1 + 2 \cdot 1 + 4 \cdot 0 + 6 \cdot 1 \\
&=& 10.
\end{align*}$$

:::

Итак, мы увидели, что, взяв разбиение тоньше, значение интеграла не изменилось, очевидно, что это верно и в общем случае.

:::{prf:lemma}
Пусть $I \subsetneq \mathbb{R}$ — промежуток и пусть $f:I \to \mathbb{R}$ — ступенчатая функция относительно разбиения $\lambda(I)$, тогда если имеем разбиение $\lambda'(I)$, которое тоньше, чем $\lambda(I)$, то
$$
\int_{\lambda(I)}f\mathrm{d}x = \int_{\lambda'(I)}f\mathrm{d}x.
$$
:::

:::{prf:proof}
:class: dropdown
:nonumber:
Пусть $\lambda(I) = \{ A_1,\ldots, A_n \}$ и пусть 
$$
\lambda'(I) : = \Bigl\{A_{11}', \ldots, A'_{1\ell_1},\ldots, A'_{n1},\ldots, A'_{n\ell_n} \Bigr\},
$$
где $A_i$ содержит только $A'_{i1},\ldots, A'_{i\ell_i}$, $1\le i \le n$. Из определения [](#fiber) тогда следует, что $A_i = A'_{i1} \cup \cdots \cup A'_{i\ell_i}$ и $|A_i| = |A'_{i1}| + \cdots + |A'_{i\ell_i}|$.

Наконец, используя лемму [](#fiber_for_functions), получаем, что
$$
f(A'_{i1}) = \cdots = f(A'_{i\ell_i}) = f(A_i), \qquad 1 \le i \le \ell.
$$

Таким образом, имеем
$$\begin{align*}
\int_{\lambda'(I)}f\mathrm{d}x &=& \Bigl(f(A_{11}') \cdot \left| A'_{11} \right| + \cdots + f(A_{1\ell_1})\cdot \left|A'_{i\ell_1}\right|\Bigr) + \cdots + \Bigl(f(A_{11}') \left|A_{11}'\right| + \cdots + f(A_{1\ell_1})\cdot \left|A'_{i\ell_1}\right| \Bigr) \\
&=& f(A_1) \cdot \left( \left| A'_{11}  \right| + \cdots + \left| A'_{1\ell_1} \right| \right) + \cdots + f(A_n) \cdot \left( \left| A'_{n1}  \right| + \cdots + \left| A'_{n\ell_n} \right| \right) \\
&=& f(A_1) |A_1| + \cdots + f(A_n)\cdot |A_n| \\
&=& \int_{\lambda(I)}f\mathrm{d}x.
\end{align*}$$
:::


Таким образом, мы можем ввести следующее определение, которое будем использовать в дальнейшем.

:::{prf:definition}
Пусть $I \subsetneq \mathbb{R}$ — промежуток, $f:I \to \mathbb{R}$ — ступенчатая функция на нём. Определим **интеграл на промежутке $I$** ступенчатой функции $f:I \to \mathbb{R}$ следующим образом
$$
\int_If\mathrm{d}x: =  \int_{\lambda(I)}f\mathrm{d}x,
$$
где $\lambda(I)$ такое разбиение промежутка $I$, что $f$ является ступенчатой относительно $\lambda(I).$
:::


:::{prf:example}
Вернёмся к примеру [](#int_[1,4]=10). Пусть $f: [1,4] \to \mathbb{R}$ определена следующим образом
$$
f(x)  = \begin{cases}
\, 2 & 1 \le x <3 \\
\, 4 & x = 3 \\
\, 6 & 3< x \le 4
\end{cases}
$$
и пусть $\lambda(I) = \{ [1,3), \{3\}, (3,4] \}$, тогда
$$\begin{align*}
\int_{\lambda(I)} f \mathrm{d}x &=& \alpha_{[1,3)}\cdot | [1,3) | + \alpha_{\{3\}}\cdot |\{3\}| + \alpha_{(3,4]} \cdot | (3,4] | \\
&=& 2 \cdot 2 + 4 \cdot 0 + 6 \cdot 1 \\
&=& 10.
\end{align*}$$

Тогда
$$
\int_{[1,4]}f \mathrm{d}x  =10.
$$
:::

:::{prf:theorem}
Пусть $I \subsetneq \mathbb{R}$ — промежуток и $f,g:I \mathbb{R}$ — две ступенчатые функции на нём.

1. $$
\int_I(\alpha \cdot f +  \beta \cdot g)\mathrm{d}x = \alpha\cdot \int_I f\mathrm{d}x  + \beta \cdot \int_I g \mathrm{d}x, \qquad \alpha, \beta \in \mathbb{R}.
$$
2. Если $f(x) \ge g(x)$ для всех $x \in I$, то
$$
\int_I f\mathrm{d}x \ge \int_I g(x) \mathrm{d}x.
$$

3. Если $f(x) = \alpha$ для всех $x \in I$, то
$$
\int_I f\mathrm{d}x = \alpha \cdot |I|.
$$
4. Если $I \subseteq J$ и если $\varphi: J \to \mathbb{R}$ функция, определённая следующим образом
$$
\varphi(x) : = \begin{cases}
f(x) & x \in I,\\
0 & x \notin I,
\end{cases}
$$
тогда $\varphi(x)$ — ступенчатая на $J$ и $\int_J\varphi \mathrm{d}x  = \int_I f\mathrm{d}x$.
5. Пусть $\{A,B\}$ — разбиение промежутка $I$, тогда если функции $f|_A:A \to \mathbb{R}$, $f|_B:B \to \mathbb{R}$ ступенчаты на $A$ и $B$ соответственно, то
$$
\int_I f \mathrm{d}x = \int_A f|_A \mathrm{d}x + \int_B f|_B \mathrm{d}x.
$$


:::

:::{prf:proof}
:class: dropdown
:nonumber:
Это следует сразу из определения интеграла, ступенчатых функций и определения разбиения промежутка.
:::